[logging]
default_level = "info"
development = false

[logging.component_levels]
downloader = "info"
log-fetcher = "info"
sync-manager = "debug"
reorg-detector = "warn"
log-store = "info"
maintenance = "info"

[metrics]
enabled = true
listen_address = ":9090"
path = "/metrics"

[downloader]
rpc_url = "https://mainnet.infura.io/v3/XXXX"
chunk_size = 5000
finality = "finalized"
finalized_lag = 12

[downloader.retry]
max_attempts = 5
initial_backoff = "1s"
max_backoff = "30s"
backoff_multiplier = 2.0

[downloader.db]
path = "./data/downloader.sqlite"
journal_mode = "WAL"
synchronous = "NORMAL"
busy_timeout = 5000
cache_size = 10000
max_open_connections = 25
max_idle_connections = 5
enable_foreign_keys = true

[downloader.retention_policy]
max_db_size_mb = 1000
max_blocks = 10000

[downloader.maintenance]
enabled = true
check_interval = "5m"
vacuum_on_startup = true
wal_checkpoint_mode = "TRUNCATE"

[[indexers]]
name = "MyTokenIndexer"
type = "erc20"
start_block = 17000000
db = { path = "./data/mytokenindexer.sqlite", journal_mode = "WAL", synchronous = "NORMAL", busy_timeout = 5000, cache_size = 10000, max_open_connections = 25, max_idle_connections = 5, enable_foreign_keys = true }

[[indexers.contracts]]
address = "0x1234567890abcdef1234567890abcdef12345678"
events = [
    "Transfer(address,address,uint256)",
    "Approval(address,address,uint256)"
]

# Optional: API server configuration
[api]
enabled = true
listen_address = ":8080"

[api.cors]
enabled = true
allowed_origins = ["*"]
