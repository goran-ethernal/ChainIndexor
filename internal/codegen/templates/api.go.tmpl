// Code generated by indexer-gen. DO NOT EDIT.
package {{.Package}}

import (
	"context"
	"reflect"

	"github.com/goran-ethernal/ChainIndexor/internal/indexer"
	pkgindexer "github.com/goran-ethernal/ChainIndexor/pkg/indexer"
)

// InitEventMetadata returns metadata for all indexed events.
func (idx *{{.Name}}Indexer) InitEventMetadata() map[string]*indexer.EventMetadata {
	return map[string]*indexer.EventMetadata{
		{{- range .Events}}
		"{{ToLower .Name}}": {
			Name:      "{{.Name}}",
			Table:     "{{TableName .Name}}",
			EventType: reflect.TypeOf((*{{.Name}})(nil)),
			AddressColumns: []string{
				{{- range .Params}}{{if eq .Type "address"}}
				"{{ToSnakeCase .Name}}_address",
				{{- end}}{{end}}
			},
		},
		{{- end}}
	}
}

// Ensure {{.Name}}Indexer implements pkgindexer.Queryable
var _ pkgindexer.Queryable = (*{{.Name}}Indexer)(nil)

// QueryEvents retrieves events based on the provided query parameters.
func (idx *{{.Name}}Indexer) QueryEvents(ctx context.Context, params pkgindexer.QueryParams) (any, int, error) {
	return idx.BaseIndexer.QueryEvents(ctx, idx, params)
}

// GetStats returns statistics about the indexed data.
func (idx *{{.Name}}Indexer) GetStats(ctx context.Context) (pkgindexer.StatsResponse, error) {
	return idx.BaseIndexer.GetStats(ctx, idx)
}

// GetEventTypes returns the list of event type names this indexer handles.
func (idx *{{.Name}}Indexer) GetEventTypes() []string {
	return idx.BaseIndexer.GetEventTypes(idx)
}

// QueryEventsTimeseries retrieves time-series aggregated event data.
func (idx *{{.Name}}Indexer) QueryEventsTimeseries(ctx context.Context, params pkgindexer.TimeseriesParams) ([]pkgindexer.TimeseriesDataPoint, error) {
	return idx.BaseIndexer.QueryEventsTimeseries(ctx, idx, params)
}

// GetMetrics returns performance and processing metrics.
func (idx *{{.Name}}Indexer) GetMetrics(ctx context.Context) (pkgindexer.MetricsResponse, error) {
	return idx.BaseIndexer.GetMetrics(ctx, idx)
}
